<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="navbar-container"></div>
  <h1>Welcome to the Shop</h1>
  <div id="products"></div>
  <script>
     fetch('navbar.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('navbar-container').innerHTML = data;
      });


    fetch('http://localhost:8080/api/products')
      .then(response => response.json())
      .then(products => {
        const productsDiv = document.getElementById('products');
        products.forEach(product => {
          const productDiv = document.createElement('div');
          productDiv.className = 'product';
          productDiv.innerHTML = `
            <h2>${product.name}</h2>
            <p>${product.description}</p>
            <p>Price: $${product.price}</p>
          `;
          productsDiv.appendChild(productDiv);
        });
      })
      .catch(error => console.error('Error fetching products:', error));
  </script>
</body>
</html>
,,,,<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Login</h1>
  <form id="loginForm">
    <input type="email" id="email" placeholder="Email" required>
    <input type="password" id="password" placeholder="Password" required>
    <button type="submit">Login</button>
  </form>

  <!-- <script src="app.js"></script> -->
  <script>
    document.getElementById('loginForm').addEventListener('submit', event => {
  event.preventDefault();
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;

  fetch('http://localhost:8080/api/users/login', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ email, password })
  })
  .then(response => response.json()) // Expecting JSON response
  .then(data => {
    if (data && data.userId) {
      // Store the user ID in localStorage or sessionStorage
      localStorage.setItem('userId', data.userId);
      alert('Login successful');
      window.location.href = 'index.html';
    } else {
      alert('Invalid credentials');
    }
  })
  .catch(error => console.error('Error during login:', error));
});

  </script>
</body>
</html>
,,,<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Navigation Bar</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="user-orders.html">User orders</a></li>
    </ul>
  </nav>
</body>
</html>
,,,,<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Register</h1>
  <form id="registerForm">
    <input type="text" id="name" placeholder="Name" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="password" id="password" placeholder="Password" required>
    <button type="submit">Register</button>
  </form>

  <script src="app.js"></script>
  <script>
    document.getElementById('registerForm').addEventListener('submit', event => {
      event.preventDefault();
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      fetch('http://localhost:8080/api/users/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, email, password })
      })
      .then(response => {
        if (response.ok) {
          alert('Registration successful');
          window.location.href = 'login.html';
        } else {
          alert('Registration failed');
        }
      })
      .catch(error => console.error('Error during registration:', error));
    });
  </script>
</body>
</html>
,,,,<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Orders</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="navbar-container"></div>
  <h1>My Orders</h1>
  <div id="orders"></div>

  <script>
     fetch('navbar.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('navbar-container').innerHTML = data;
      });



    const user = localStorage.getItem("userId")
    fetch(http://localhost:8080/api/orders/user/${userId})
      .then(response => response.json())
      .then(orders => {
        const ordersDiv = document.getElementById('orders');
        orders.forEach(order => {
          const orderDiv = document.createElement('div');
          orderDiv.className = 'order';
          orderDiv.innerHTML = `
            <h3>Order #${order.id}</h3>
            <p>Date: ${order.date}</p>
            <ul>
              ${order.items.map(item => <li>${item.product.name} - ${item.quantity}</li>).join('')}
            </ul>
          `;
          ordersDiv.appendChild(orderDiv);
        });
      })
      .catch(error => console.error('Error fetching orders:', error));
  </script>
</body>
</html>
,,,,body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f9f9f9;
  }
  
  h1 {
    text-align: center;
    margin: 20px;
  }
  
  form {
    max-width: 300px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
  }
  
  input, button {
    margin: 10px 0;
    padding: 10px;
    font-size: 16px;
  }
  
  .product, .order {
    border: 1px solid #ccc;
    padding: 15px;
    margin: 10px;
    background-color: #fff;
  }
  

  /* Style the navigation bar */
nav {
  background-color: #333;
  padding: 10px;
  text-align: center;
}

nav ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

nav ul li {
  display: inline;
  margin: 0 15px;
}

nav ul li a {
  color: white;
  text-decoration: none;
  font-size: 18px;
}

nav ul li a:hover {
  text-decoration: underline;
}